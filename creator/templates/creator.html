{% extends 'base.html' %}

{% block content %}

{% load staticfiles %}

<div class="block-31" style="position: relative;">
    <div class="owl-carousel loop-block-31 ">
      <div class="block-30 item" style="background-image: url('{% static 'images/bg_1.jpg' %}');"
        data-stellar-background-ratio="0.5">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-md-7">
              <h2 class="heading">Every student can learn, just not on the same day, or the same way.</h2>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

<br>

{% if chk == 3 or chk == 1 %}
{% if chk == 3 %}
<div class="container">
  <button class="btn btn-success" data-toggle="modal" data-target="#addcourse">Add Course</button>
</div>
{% elif chk == 1 %}
<div class="container">
  <div class="row">
    <div class="col-md-4">
      <button class="btn btn-success" data-toggle="modal" data-target="#addcourse">Add Topic</button>
    </div>
  </div>
</div>
{% endif %}
<br>
{% endif %}

<div class="container">
{% if chk == 2 %}  
<!-- this is for the resources template -->
<div class="container">
  <div class="row">
    <div class="col-md-6">
      <button class="btn btn-success" data-toggle="modal" data-target="#addresource2">Add text/Questions</button>
    </div>
    <div class="col-md-6">
        <button class="btn btn-success" data-toggle="modal" data-target="#addresource">Add Video/Pictures</button>
    </div>
  </div>
</div>         
{% for k in keys.all %}

<div class="alert alert-success">
{{ k.data }}
</div>

{% endfor %}


{% else %}
<br>
<div class="container">
  <div class="row">
    <div class="col-md-6 grid" id="sort">
      <div class="card"  style="width: 18rem;">
        {% for k in keys.all %}

          <div class="card-body" id="onemore" >
            <h5 class="card-title text-center">{{ k.title }}</h5>
            <p class="card-text" style="text-align:justify;">{{ k.desc }}</p>
            <div class="text-center">
              {% if chk == 1 %}
              <form method="GET" action="{% url 'res' %}">
                <input hidden=true type="number" name="foreignKey" value="{{ k.ids }}" >
                <input class="btn btn-primary" type="submit" name="goto" value="Know More">
              </form>
              <td class="index">{{ k.oid }}</td>
              <input type="number" class="commit" value="{{ k.oid }}">
              {% else %}
              <form method="GET" action="{% url 'top' %}">
                <input hidden=true type="number" name="foreignKey" value="{{ k.ids }}" >
                <input class="btn btn-primary" type="submit" name="goto" value="Know More">
              </form>
              {% endif %}
            </div>
          </div>
          {% endfor %}
        </div>
    </div>
  </div>
</div>
  <br>


{% endif %}



</div>

<div class="modal fade" id="addcourse" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        {% if chk == 3 %}
        <h5 class="modal-title" id="SignUpModal">Add Course</h5>
        {% elif chk == 1 %}
        <h5 class="modal-title" id="SignUpModal">Add Topic</h5>
        {% endif %}
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form method="POST" action="{% url 'addc' %}" enctype="multipart/form-data">
          <!--  -->
          {% csrf_token %}


          <div class="form-group">
            {% if chk == 3 %}
            <label>Course Title</label>
            {% elif chk == 1 %}
            <label>Topic Title</label>
            {% endif %}
            <input type="text" name="ctitle" class="form-control" aria-describedby="emailHelp"
              placeholder="Enter a suitable course title">
          </div>
          <div class="form-group">
            {% if chk == 3 %}
            <label>Course Description</label>
            {% elif chk == 1 %}
            <label>Topic Description</label>
            {% endif %}
            <textarea rows="10" cols="6" name="cdesc" class="form-control" aria-describedby="emailHelp"
              placeholder="Enter Course Description"></textarea>
          </div>
          {% if chk == 1 %}
          
            <input hidden="true" type="number" name="orderid" value="{{ ordLen }}" >
            <input hidden=true name="getcid" value="{{ courseID }}" />
          {% endif %}
          <input hidden="true" name="pickachu" value="{{chk}}" />
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Submit</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>



<!-- modal for resources  -->
<div class="modal fade" id="addresource" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
      
        <h5 class="modal-title" id="SignUpModal">Add Resources</h5>
      
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form method="POST" action="{% url 'addR' %}" enctype="multipart/form-data">
          <!--  -->
          {% csrf_token %}


          <div class="form-group dropdown show">
            <label for=""> <strong>Select Resource type to add:</strong> </label>
            <select  name="rSelected" class ="btn btn-secondary dropdown-toggle">
              <option class="dropdown-item" value="P">Picture</option>
              <option class="dropdown-item" value="V">Videos</option>
            </select>
          </div>

          <div class="form-group">
              <label>Resources</label>
              <input type="file" name="myfile" class="form-control " id="imageUser" placeholder="Enter">
          </div>
            <input hidden="true" type="number" name="orderid" value="{{ topOrdLen }}">
 
          <input hidden="true" name="resId" value=1 />
          <input hidden='true' name="Fkey" value="{{ topicID }}" >
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Submit</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </form>
      </div>

    </div>
  </div>
  </div>




  <div class="modal fade" id="addresource2" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
          
            <h5 class="modal-title" id="SignUpModal">Add Resources</h5>
          
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form method="POST" action="{% url 'addR' %}" enctype="multipart/form-data">
              <!--  -->
              {% csrf_token %}
    
    
              <div class="form-group dropdown show">
                <label for=""> <strong>Select Resource type to add:</strong> </label>
                <select  name="rSelected" class ="btn btn-secondary dropdown-toggle">
                  <option class="dropdown-item" value="Q">Questions</option>
                  <option class="dropdown-item" value="T">Texts</option>
                </select>
              </div>
    
              <div class="form-group">
                  <label>Resources</label>
                  <input type="text" name="title" id="" placeholder="enter question/title">
                  <textarea rows="10" cols="6" name="summary" class="form-control" aria-describedby="emailHelp"
                  placeholder="Enter Answer/decriptions"></textarea>

              </div>
              <div class="form-group">
                <label>Order Id</label>
                <input type="number" name="orderid" id="">
            </div>
              <input hidden="true" name="resId" value=0 />
              <input hidden='true' name="Fkey" value="{{ topicID }}" >
              <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </form>
          </div>
    
        </div>
      </div>
      </div>


<!-- ended modal for resources -->


<!-- script tag for order -->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript" >
    
    var fixHelperModified = function(e, div) {
            // var $originals = div.children();
            var $helper = div.clone();
            // $helper.children().each(function(index) {
            //     $(this).width($originals.eq(index).width())
            // });
            return $helper;
        },
            updateIndex = function(e, ui) {
                $('td.index', ui.item.parent()).each(function (i) {
                    $(this).html(i + 1);
                });
            };

        $("#sort").sortable({
            helper: fixHelperModified,
            stop: updateIndex
        });
        $("#onemore").disableSelection()
  
</script>


<!-- script tag for order -->

{% endblock %}
